# Phase 4: Local Kubernetes Deployment with Minikube, Helm Charts, and AI Ops Tools
## Constitution v4.0

**Date:** 2026-02-08

## Objective
Deploy the Phase 3 Todo AI Chatbot (FastAPI backend + ChatKit frontend) as a cloud-native application on a local Minikube cluster, maintaining stateless design, scalability, observability, and resilience.

## Core Principles (Agentic Dev Stack)
- Strict agentic workflow: constitution → detailed spec → high-level plan → granular tasks → implementation via Qwen/CCR agents
- No manual coding – all Dockerfiles, Helm charts, YAML, scripts, and commands generated by agents
- Reuse existing Phase 3 code (backend, frontend, MCP tools, agents SDK)

## Technology & Tools Stack
- Containerization: Docker + Gordon (Docker AI)
- Orchestration: Minikube (local Kubernetes)
- Packaging: Helm 3 Charts
- AI Ops: kubectl-ai (YAML/command generation), kagent (cluster analysis & optimization)
- Agents used:
  - docker-engineer
  - helm-chart-engineer
  - minikube-deployer
  - aiops-troubleshooter
  - infra-spec-writer
  - deployment-tester

## Key Constraints & Design Goals
- Stateless server & agents (state in DB only)
- Resilient: liveness/readiness probes, auto-restart, replicas ≥ 2
- Observable: pod logs, events, kubectl-ai/kagent for health checks, minikube dashboard
- Secure: env vars for secrets (OPENAI_API_KEY, DATABASE_URL), no root containers
- Local testing: port-forward to localhost:8000 (backend) and localhost:3000 (frontend/chat UI)
- Zero manual YAML/Dockerfile editing – all generated by agents

## Deliverables Checklist
- [ ] Dockerfiles in backend/ and frontend/
- [ ] Helm charts in charts/todo-backend/ and charts/todo-frontend/
- [ ] constitution.md v4.0 (this file)
- [ ] phase4-spec.md
- [ ] plan.md
- [ ] agents/ folder with all agent .md files
- [ ] README-phase4.md with setup, deploy, test instructions
- [ ] Final demo: working chat UI + todo management on localhost via Minikube

## Success Criteria
- [ ] Minikube cluster starts successfully
- [ ] Helm charts install without errors
- [ ] All pods Running/Ready
- [ ] Backend API responds on localhost:8000
- [ ] Frontend ChatKit UI loads on localhost:3000
- [ ] Natural language todo commands work (add/list/complete) via chat
- [ ] Troubleshooting possible using aiops-troubleshooter agent

## Exit Conditions
- [ ] All agents executed successfully
- [ ] Deployment verified with deployment-tester agent
- [ ] No manual code/YAML changes required